(this.webpackJsonppetrol_check=this.webpackJsonppetrol_check||[]).push([[0],{14:function(t,e,n){t.exports=n(28)},19:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),i=n(3),o=n.n(i),r=(n(19),n(5)),l=n.n(r),c=n(7),u=n(8),d=n(9),p=n(10),m=n(13),h=n(12),f=(n(21),n(4)),g=n(2),b=function(t){var e=t.origin,n=t.destination,i=t.waypoints,o=Object(a.useRef)(0);return Object(a.useEffect)((function(){o.current=0}),[e,n,i]),(new window.google.maps.DirectionsService).route({origin:e,destination:n,travelMode:"DRIVING",waypoints:i},(function(e,n){n===window.google.maps.DirectionsStatus.OK&&0===o.current?(o.current+=1,t.setDir(e)):console.log("Directions request failed due to "+n)})),s.a.createElement(s.a.Fragment,null,t.directions&&s.a.createElement(g.a,{directions:t.directions}))};n(22);function y(t){var e=Object(a.useState)(),n=Object(f.a)(e,2),i=n[0],o=n[1],r=Object(a.useState)(),l=Object(f.a)(r,2),c=l[0],u=l[1],d=Object(a.useState)(),p=Object(f.a)(d,2),m=p[0],h=p[1],y=Object(a.useState)(),S=Object(f.a)(y,2),E=S[0],v=S[1];return s.a.createElement(g.d,{googleMapsApiKey:"AIzaSyDH_jq5nDy_8Wn3bOy-bCPxxitBRDvItRE"},s.a.createElement(g.b,{mapContainerStyle:{width:"100vw",height:"60vh"},zoom:15,center:{lat:-34.123,lng:150.342}},null!=t.nearbyStations&&t.nearbyStations.map((function(e){return s.a.createElement(g.e,{position:{lat:e.info.location.latitude,lng:e.info.location.longitude},label:e.price.toString(),onClick:function(){return t.stationSelectedHandler(e)}})})),null!==t.mapStart&&null!==t.mapDest&&s.a.createElement(b,{origin:t.mapStart,destination:t.mapDest,directions:i,setDir:function(e){console.log(e),o(e),u({lat:e.routes[0].bounds.Za.j+.01,lng:e.routes[0].bounds.Va.i});for(var n=[],a=0;a<t.stations.length;a++)if(e.routes[0].bounds.Va.i<=t.stations[a.toString()].location.longitude&&t.stations[a.toString()].location.longitude<=e.routes[0].bounds.Va.j&&e.routes[0].bounds.Za.i<=t.stations[a.toString()].location.latitude&&t.stations[a.toString()].location.latitude<=e.routes[0].bounds.Za.j)for(var s=0;s<t.prices.length;s++)if(t.prices[s.toString()].stationcode===t.stations[a.toString()].code&&t.prices[s.toString()].fueltype===t.fuelType){for(var i=0,r=0,l=0;l<e.routes[0].legs.length;l++)i+=e.routes[0].legs[l].duration.value,r+=e.routes[0].legs[l].distance.value;h((i/60).toFixed(0)),v((r/1e3).toFixed(1)),n.push({info:t.stations[a.toString()],price:t.prices[s.toString()].price,lastupdated:t.prices[s.toString()].lastupdated})}n.sort((function(t,e){return t.price>e.price?1:-1})),t.nearbyStationsHandler(n)},waypoints:t.selected}),t.selected&&s.a.createElement(g.c,{position:c},s.a.createElement("div",{className:"InfoWindow"},s.a.createElement("p",null,"Distance: ",E,"km"),s.a.createElement("p",null,"Duration: ",m," minutes")))))}n(23);function S(t){return s.a.createElement("div",{className:"Input"},s.a.createElement("input",{className:"start",type:"text",placeholder:"Choose a starting location...",name:"start",value:t.start,onChange:t.inputChangedHandler}),s.a.createElement("input",{className:"dest",type:"text",placeholder:"Choose a destination...",name:"dest",value:t.dest,onChange:t.inputChangedHandler}),s.a.createElement("p",null,"Fuel Type:",s.a.createElement("select",{className:"fuelType",name:"fuelType",defaultValue:t.fuelType,onChange:t.inputChangedHandler},s.a.createElement("option",{value:"PDL"},"Diesel"),s.a.createElement("option",{value:"U91"},"Unleaded 91"),s.a.createElement("option",{value:"P98"},"Petroleum 98"),s.a.createElement("option",{value:"E10"},"Ethanol")),s.a.createElement("button",{className:"submit",onClick:t.submitHandler},"Submit")))}var E=n(11),v=n.n(E);n(27);function D(t){var e=null;return e=null===t.nearbyStations?s.a.createElement("p",null,"No nearby stations for the specified route."):t.nearbyStations.map((function(e){return s.a.createElement(v.a,{trigger:e.info.name+": $"+e.price,onOpening:function(){return t.stationSelectedHandler(e)}},s.a.createElement("p",null,s.a.createElement("b",null,"Address:")," ",e.info.address),s.a.createElement("p",null,s.a.createElement("em",null,"Last updated ",e.lastupdated)))})),s.a.createElement("div",{className:"Stations"},s.a.createElement("h1",null,"Nearby Stations"),e)}var H=function(t){Object(m.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).inputChangedHandler=function(t){var e=t.target,n=e.name,s=e.value;a.setState(Object(u.a)({},n,s))},a.submitHandler=function(t){a.setState({mapStart:a.state.start,mapDest:a.state.dest})},a.stationSelectedHandler=function(t){a.setState({selected:[{location:{lat:t.info.location.latitude,lng:t.info.location.longitude}}]})},a.nearbyStationsHandler=function(t){a.setState({nearbyStations:t})},a.state={start:"",dest:"",fuelType:"PDL",stations:[],prices:[],mapStart:null,mapDest:null,accessToken:null,apiKey:null,transaction:0,nearbyStations:null},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.onegov.nsw.gov.au/oauth/client_credential/accesstoken?grant_type=client_credentials",{async:!0,crossDomain:!0,method:"GET",headers:{authorization:"VVZ1TnZsRjE3eGpZYUNKMGNXZ29PbExGQWpIRDRQT3I6WTAzQzFHcTZxT1c2WnR0eg=="}}).then((function(t){return t.json()})).then((function(t){return e.setState({accessToken:t.access_token,apiKey:t.client_id,transaction:e.state.transaction+1})}));case 2:return t.next=4,fetch("https://api.onegov.nsw.gov.au/FuelPriceCheck/v1/fuel/prices",{async:!0,crossDomain:!0,method:"GET",headers:{authorization:"Bearer "+this.state.accessToken,apikey:this.state.apiKey,transactionid:1,requesttimestamp:(new Date).toLocaleString()}}).then((function(t){return t.json()})).then((function(t){return e.setState({stations:t.stations,prices:t.prices})})).then((function(){return console.log(e.state.stations[0],e.state.prices[0])}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("h1",{className:"title"},"Petrol Watch"),s.a.createElement(S,{inputChangedHandler:this.inputChangedHandler,submitHandler:this.submitHandler,start:this.state.start,dest:this.state.dest,fuelType:this.state.fuelType,fuelLeft:this.state.fuelLeft}),s.a.createElement(y,{mapStart:this.state.mapStart,mapDest:this.state.mapDest,stations:this.state.stations,prices:this.state.prices,fuelType:this.state.fuelType,accesstoken:this.state.accesstoken,apikey:this.state.apikey,stationSelectedHandler:this.stationSelectedHandler,selected:this.state.selected,nearbyStationsHandler:this.nearbyStationsHandler,nearbyStations:this.state.nearbyStations}),s.a.createElement(D,{inputChangedHandler:this.inputChangedHandler,submitHandler:this.submitHandler,stationSelectedHandler:this.stationSelectedHandler,start:this.state.start,dest:this.state.dest,fuelType:this.state.fuelType,selected:this.state.selected,nearbyStations:this.state.nearbyStations}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(H,null),s.a.createElement("script",{async:!0,defer:!0,src:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDH_jq5nDy_8Wn3bOy-bCPxxitBRDvItRE&callback=initMap"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.60af3a34.chunk.js.map